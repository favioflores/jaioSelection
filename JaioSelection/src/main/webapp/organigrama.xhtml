<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="content">
		<h:form id="formOrganigrama" enctype="multipart/form-data">

			<style>
.ui-organigram .ui-organigram-node.division {
	background: #93e7ff;
	background: -moz-linear-gradient(top, #93e7ff 0%, #007efc 100%);
	background: -webkit-linear-gradient(top, #93e7ff 0%, #007efc 100%);
	background: linear-gradient(to bottom, #93e7ff 0%, #007efc 100%);
}

.ui-organigram .ui-organigram-node.employee {
	background: #88c048;
	background: -moz-linear-gradient(top, #88c048 0%, #69a038 100%);
	background: -webkit-linear-gradient(top, #88c048 0%, #69a038 100%);
	background: linear-gradient(to bottom, #88c048 0%, #69a038 100%);
}
</style>

			<p:growl id="growl" life="4000" />
			<div class="ui-g">
				<div class="ui-g-12">
					<div class="card">
						<h1>#{msg['organigrama.titulo']}</h1>
						<p>#{msg['organigrama.parrafo']}</p>

						<p:button value="#{msg['organigrama.volver']}"
							outcome="crearEmpresa" />

						<p:commandButton value="#{msg['organigrama.verHistorial']}"
							disabled="true" actionListener="#{organigramaView.verHistorial}" />

						<br />
<br />
<br />
						<p:organigram id="organigrama" widgetVar="organigrama"
							value="#{organigramaView.rootNode}" var="node"
							zoom="true"
							selection="#{organigramaView.selection}" style="width: 100%">

							<p:organigramNode>
								<h:outputText value="#{node.data}" />
							</p:organigramNode>

							<p:organigramNode type="root" style="border-radius: 10px;">
								<h:outputText value="#{node.data}" />
							</p:organigramNode>

							<p:organigramNode type="division" styleClass="division"
								icon="ui-icon-suitcase" iconPos="left">
								<h:outputText value="#{node.data}" />
							</p:organigramNode>

							<p:organigramNode type="employee" styleClass="employee"
								icon="ui-icon-person">
								<h:outputText value="#{node.data}" />
							</p:organigramNode>
						</p:organigram>





						<p:contextMenu for="organigrama" nodeType="employee">
							<p:menuitem value="fire employee" update="organigrama"
								icon="ui-icon-close"
								actionListener="#{organigramaView.removeEmployee()}" />
						</p:contextMenu>

						<p:contextMenu for="organigrama" nodeType="division">
							<p:menuitem value="Add employee" ajax="false" icon="ui-icon-plus"
								onclick="PF('addEmployeeDialog').show(); return false;" />
							<p:menuitem value="Remove division"
								update="organigrama @form:growl" icon="ui-icon-close"
								actionListener="#{organigramaView.removeDivision()}" />
						</p:contextMenu>

						<p:dialog id="addEmployeeDialog" widgetVar="addEmployeeDialog"
							header="Add employee">

							<p:inputText value="#{organigramaView.employeeName}" />

							<p:commandButton process="@parent" update=":formOrganigrama:organigrama"
								value="Add" actionListener="organigrama"
								oncomplete="PF('addEmployeeDialog').hide();" />

						</p:dialog>
					</div>
				</div>
			</div>
		</h:form>
		<p:dialog header="#{msg['organizacion.dialog.titulo']}"
			widgetVar="dlgNuevo" modal="true" resizable="false"
			focus=":formCrear:desc" appendTo="@(body)" closeOnEscape="true"
			closable="true" showEffect="clip" hideEffect="clip" responsive="true">

			<h:form id="formCrear" enctype="multipart/form-data">
				<p:focus for="desc" />
				<p:growl life="4000" />
				<h:panelGrid columns="3" cellpadding="5">
					<p:outputLabel for="desc"
						value="#{msg['organizacion.dialog.desc']}" />
					<p:inputText id="desc" widgetVar="desc"
						value="#{crearEmpresaView.razon}" required="true"></p:inputText>
					<p:message for="desc" display="tooltip" />

					<p:outputLabel for="fecha"
						value="#{msg['organizacion.dialog.fecha']}" />
					<p:inputText id="fecha" value="#{crearEmpresaView.fecha}"
						readonly="true" required="true"></p:inputText>
					<p:message for="fecha" display="tooltip" />

					<p:outputLabel for="imagen"
						value="#{msg['organizacion.dialog.imagen']}" />
					<p:fileUpload id="imagen"
						fileUploadListener="#{crearEmpresaView.subirImagen}"
						previewWidth="10" dragDropSupport="true" update=":formCrear:"
						auto="true" sizeLimit="100000"
						allowTypes="/(\.|\/)(gif|jpe?g|png)$/" onstart="enviaDatos()" />
					<p:message for="imagen" display="tooltip" />



					<p:outputLabel for="imagePreview"
						value="#{msg['organizacion.dialog.preview']}" />
					<p:graphicImage id="imagePreview"
						value="#{crearEmpresaView.imagenPreview}"
						alt="#{msg['organizacion.dialog.noimagen']}" height="120"
						width="160" />

					<p:remoteCommand name="enviaDatos" process="@form" />


					<f:facet name="footer">
						<p:commandButton value="#{msg['organizacion.dialog.crear']}"
							actionListener="#{crearEmpresaView.crearEmpresa}"
							update=":formCrear:" oncomplete="PF('dlgNuevo').hide();" />

						<p:hotkey id="hotCrear" bind="enter"
							actionListener="#{crearEmpresaView.crearEmpresa}"
							update=":formCrear:" oncomplete="PF('dlgNuevo').hide();" />
					</f:facet>
				</h:panelGrid>
			</h:form>
		</p:dialog>

	</ui:define>

</ui:composition>